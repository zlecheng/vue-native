import{_ as T}from"./TheFooter-BJwuqCo-.js";import{b1 as y,aV as U,l as w,b2 as x,b3 as V,F as $,J as n,D as b,E as D,C as o,I as r,B as c,b4 as C,aK as K,ao as L,z as q,v as F,w as E}from"./index-Cqzle7pu.js";import{t as J}from"./common-DX_f8BP6.js";import{_ as z}from"./Checkbox-BNi3e3Ps.js";import{_ as A}from"./Input-BRuh2y0t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Eye-DBOnxg-C.js";const M="/assets/login_banner-BD2eW0TC.webp",P="/assets/logo-Bw3FJMyu.png",W={toggleRole:u=>y.post("/auth/role/toggle",u),login:u=>y.post("/auth/login",u,{noNeedToken:!0}),getUser:()=>y.get("/user/detail")},j={class:"wh-full flex-col bg-[url(@/assets/images/login_bg.webp)] bg-cover"},G={class:"m-auto max-w-700 min-w-345 f-c-c rounded-8 bg-opacity-20 bg-cover p-12 card-shadow auto-bg"},H=n("div",{class:"hidden w-380 px-20 py-35 md:block"},[n("img",{src:M,class:"w-full",alt:"login_banner"})],-1),O={class:"w-320 flex-col px-20 py-32"},X={class:"f-c-c text-24 text-#6a6a6a font-normal"},Y=n("img",{src:P,class:"mr-12 h-50"},null,-1),Z=n("i",{class:"i-fe:user mr-12 opacity-20"},null,-1),Q=n("i",{class:"i-fe:lock mr-12 opacity-20"},null,-1),ee={class:"mt-20 flex items-center"},se=n("i",{class:"i-fe:key mr-12 opacity-20"},null,-1),oe=["src"],te={class:"mt-20 flex items-center"},de={__name:"index",setup(u){const B=U(),k=F(),d=E(),S="Panda",t=w({username:"",password:""}),_=w(""),p=J(()=>{_.value=`/api/auth/captcha?${Date.now()}`},500),f=x.get("loginInfo");f&&(t.value.username=f.username||"",t.value.password=f.password||""),p();function I(){t.value.username="admin",t.value.password="123456",m(!0)}const h=V("isRemember",!0),v=w(!1);async function m(i){const{username:e,password:l,captcha:g}=t.value;if(!e||!l)return $message.warning("请输入用户名和密码");if(!i&&!g)return $message.warning("请输入验证码");try{v.value=!0,$message.loading("正在验证，请稍后...",{key:"login"});const{data:a}=await W.login({username:e,password:l.toString(),captcha:g,isQuick:i});h.value?x.set("loginInfo",{username:e,password:l}):x.remove("loginInfo"),N(a)}catch(a){(a==null?void 0:a.code)===10003&&p(),$message.destroy("login"),console.error(a)}v.value=!1}async function N(i={}){B.setToken(i),$message.loading("登录中...",{key:"login"});try{if($message.success("登录成功",{key:"login"}),d.query.redirect){const e=d.query.redirect;delete d.query.redirect,k.push({path:e,query:d.query})}else k.push("/")}catch(e){console.error(e),$message.destroy("login")}}return(i,e)=>{const l=A,g=z,a=L,R=T;return q(),$("div",j,[n("div",G,[H,n("div",O,[n("h2",X,[Y,b(" "+D(o(S)),1)]),r(l,{value:o(t).username,"onUpdate:value":e[0]||(e[0]=s=>o(t).username=s),autofocus:"",class:"mt-32 h-40 items-center",placeholder:"请输入用户名",maxlength:20},{prefix:c(()=>[Z]),_:1},8,["value"]),r(l,{value:o(t).password,"onUpdate:value":e[1]||(e[1]=s=>o(t).password=s),class:"mt-20 h-40 items-center",type:"password","show-password-on":"mousedown",placeholder:"请输入密码",maxlength:20,onKeydown:e[2]||(e[2]=C(s=>m(),["enter"]))},{prefix:c(()=>[Q]),_:1},8,["value"]),n("div",ee,[r(l,{value:o(t).captcha,"onUpdate:value":e[3]||(e[3]=s=>o(t).captcha=s),class:"h-40 items-center",palceholder:"请输入验证码",maxlength:4,onKeydown:e[4]||(e[4]=C(s=>m(),["enter"]))},{prefix:c(()=>[se]),_:1},8,["value"]),o(_)?(q(),$("img",{key:0,src:o(_),alt:"验证码",height:"40",class:"ml-12 w-80 cursor-pointer",onClick:e[5]||(e[5]=(...s)=>o(p)&&o(p)(...s))},null,8,oe)):K("",!0)]),r(g,{class:"mt-20",checked:o(h),label:"记住我","on-update:checked":s=>h.value=s},null,8,["checked","on-update:checked"]),n("div",te,[r(a,{class:"h-40 flex-1 rounded-5 text-16",type:"primary",ghost:"",onClick:e[6]||(e[6]=s=>I())},{default:c(()=>[b(" 一键体验 ")]),_:1}),r(a,{class:"ml-32 h-40 flex-1 rounded-5 text-16",type:"primary",loading:o(v),onClick:e[7]||(e[7]=s=>m())},{default:c(()=>[b(" 登录 ")]),_:1},8,["loading"])])])]),r(R,{class:"py-12"})])}}};export{de as default};
