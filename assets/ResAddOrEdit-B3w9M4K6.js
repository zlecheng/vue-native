import{i as vt}from"./_isme_icons-CUZYZBf_.js";import{aE as Be,bC as ht,h as k,l as O,b9 as mt,k as gt,e as ie,q as yt,b8 as bt,bA as te,j as R,aQ as _t,aP as Pe,bj as wt,bk as St,bD as Rt,bE as xt,bF as kt,u as Ae,aN as se,o as Ct,p as $e,t as le,n as Tt,aq as Ne,aC as Pt,bq as Nt,ay as Ot,bG as It,aG as Oe,a as Ft,c as pe,d as Ie,a9 as Et,aa as Kt,ac as ve,f as Ue,i as Mt,af as me,ae as Bt,ah as At,ai as $t,aj as Ut,ak as jt,al as Vt,am as Dt,s as Lt,aB as Gt,an as z,ag as zt,bH as qt,b1 as ne,bI as Wt,aW as Qt,z as q,A as W,B as m,I as y,C as v,aK as X,D as Z,aY as Ht}from"./index-Cqzle7pu.js";import D from"./QuestionLabel-DPUM1Kti.js";import{f as Xt,_ as Yt,a as Jt,u as Zt,b as en}from"./useForm-C15XsYKb.js";import{c as tn,t as nn,u as an,_ as ln,a as on}from"./Tree-DyFTbI7Q.js";import{u as rn}from"./Eye-DBOnxg-C.js";import{c as sn,h as dn}from"./create-DQGFpGxz.js";import{u as un,N as cn,_ as fn,F as pn,a as vn}from"./Select-BlWy6wHz.js";import{N as hn}from"./Switch-DY3rDDJ2.js";import{_ as mn}from"./Input-BRuh2y0t.js";import{_ as gn}from"./InputNumber-CHRpojSf.js";function yn(e){if(typeof e=="number")return{"":e.toString()};const r={};return e.split(/ +/).forEach(l=>{if(l==="")return;const[o,a]=l.split(":");a===void 0?r[""]=o:r[o]=a}),r}function ee(e,r){var l;if(e==null)return;const o=yn(e);if(r===void 0)return o[""];if(typeof r=="string")return(l=o[r])!==null&&l!==void 0?l:o[""];if(Array.isArray(r)){for(let a=r.length-1;a>=0;--a){const u=r[a];if(u in o)return o[u]}return o[""]}else{let a,u=-1;return Object.keys(o).forEach(h=>{const f=Number(h);!Number.isNaN(f)&&r>=f&&f>=u&&(u=f,a=o[h])}),a}}function bn(e){var r;const l=(r=e.dirs)===null||r===void 0?void 0:r.find(({dir:o})=>o===Be);return!!(l&&l.value===!1)}const _n={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function wn(e){return`(min-width: ${e}px)`}const ae={};function Sn(e=_n){if(!ht)return k(()=>[]);if(typeof window.matchMedia!="function")return k(()=>[]);const r=O({}),l=Object.keys(e),o=(a,u)=>{a.matches?r.value[u]=!0:r.value[u]=!1};return l.forEach(a=>{const u=e[a];let h,f;ae[u]===void 0?(h=window.matchMedia(wn(u)),h.addEventListener?h.addEventListener("change",x=>{f.forEach(b=>{b(x,a)})}):h.addListener&&h.addListener(x=>{f.forEach(b=>{b(x,a)})}),f=new Set,ae[u]={mql:h,cbs:f}):(h=ae[u].mql,f=ae[u].cbs),f.add(o),h.matches&&f.forEach(x=>{x(h,a)})}),mt(()=>{l.forEach(a=>{const{cbs:u}=ae[e[a]];u.has(o)&&u.delete(o)})}),k(()=>{const{value:a}=r;return l.filter(u=>a[u])})}const Fe=1,je=gt("n-grid"),Ve=1,ge={span:{type:[Number,String],default:Ve},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},Rn=_t(ge),xn=ie({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ge,setup(){const{isSsrRef:e,xGapRef:r,itemStyleRef:l,overflowRef:o,layoutShiftDisabledRef:a}=yt(je),u=bt();return{overflow:o,itemStyle:l,layoutShiftDisabled:a,mergedXGap:k(()=>te(r.value||0)),deriveStyle:()=>{e.value;const{privateSpan:h=Ve,privateShow:f=!0,privateColStart:x=void 0,privateOffset:b=0}=u.vnode.props,{value:K}=r,$=te(K||0);return{display:f?"":"none",gridColumn:`${x??`span ${h}`} / span ${h}`,marginLeft:b?`calc((100% - (${h} - 1) * ${$}) / ${h} * ${b} + ${$} * ${b})`:""}}}},render(){var e,r;if(this.layoutShiftDisabled){const{span:l,offset:o,mergedXGap:a}=this;return R("div",{style:{gridColumn:`span ${l} / span ${l}`,marginLeft:o?`calc((100% - (${l} - 1) * ${a}) / ${l} * ${o} + ${a} * ${o})`:""}},this.$slots)}return R("div",{style:[this.itemStyle,this.deriveStyle()]},(r=(e=this.$slots).default)===null||r===void 0?void 0:r.call(e,{overflow:this.overflow}))}}),kn=Object.assign(Object.assign({},ge),Jt),Cn=ie({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:kn,setup(){const e=O(null);return{formItemInstRef:e,validate:(...o)=>{const{value:a}=e;if(a)return a.validate(...o)},restoreValidation:()=>{const{value:o}=e;o&&o.restoreValidation()}}},render(){return R(xn,Pe(this.$.vnode.props||{},Rn),{default:()=>{const e=Pe(this.$props,Xt);return R(Yt,Object.assign({ref:"formItemInstRef"},e),this.$slots)}})}}),Tn=e=>{const{popoverColor:r,boxShadow2:l,borderRadius:o,heightMedium:a,dividerColor:u,textColor2:h}=e;return{menuPadding:"4px",menuColor:r,menuBoxShadow:l,menuBorderRadius:o,menuHeight:`calc(${a} * 7.6)`,actionDividerColor:u,actionTextColor:h,actionPadding:"8px 12px"}},Pn=wt({name:"TreeSelect",common:St,peers:{Tree:Rt,Empty:xt,InternalSelection:kt},self:Tn}),Nn={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},De=24,he="__ssr__",On={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:De},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},In=ie({name:"Grid",inheritAttrs:!1,props:On,setup(e){const{mergedClsPrefixRef:r,mergedBreakpointsRef:l}=Ae(e),o=/^\d+$/,a=O(void 0),u=Sn((l==null?void 0:l.value)||Nn),h=se(()=>!!(e.itemResponsive||!o.test(e.cols.toString())||!o.test(e.xGap.toString())||!o.test(e.yGap.toString()))),f=k(()=>{if(h.value)return e.responsive==="self"?a.value:u.value}),x=se(()=>{var S;return(S=Number(ee(e.cols.toString(),f.value)))!==null&&S!==void 0?S:De}),b=se(()=>ee(e.xGap.toString(),f.value)),K=se(()=>ee(e.yGap.toString(),f.value)),$=S=>{a.value=S.contentRect.width},s=S=>{Nt($,S)},U=O(!1),M=k(()=>{if(e.responsive==="self")return s}),P=O(!1),I=O();return Ct(()=>{const{value:S}=I;S&&S.hasAttribute(he)&&(S.removeAttribute(he),P.value=!0)}),$e(je,{layoutShiftDisabledRef:le(e,"layoutShiftDisabled"),isSsrRef:P,itemStyleRef:le(e,"itemStyle"),xGapRef:b,overflowRef:U}),{isSsr:!Tt,contentEl:I,mergedClsPrefix:r,style:k(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:te(e.xGap),rowGap:te(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${x.value}, minmax(0, 1fr))`,columnGap:te(b.value),rowGap:te(K.value)}),isResponsive:h,responsiveQuery:f,responsiveCols:x,handleResize:M,overflow:U}},render(){if(this.layoutShiftDisabled)return R("div",Ne({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var r,l,o,a,u,h,f;this.overflow=!1;const x=Ot(It(this)),b=[],{collapsed:K,collapsedRows:$,responsiveCols:s,responsiveQuery:U}=this;x.forEach(p=>{var j,_,i,N,C;if(((j=p==null?void 0:p.type)===null||j===void 0?void 0:j.__GRID_ITEM__)!==!0)return;if(bn(p)){const E=Oe(p);E.props?E.props.privateShow=!1:E.props={privateShow:!1},b.push({child:E,rawChildSpan:0});return}p.dirs=((_=p.dirs)===null||_===void 0?void 0:_.filter(({dir:E})=>E!==Be))||null,((i=p.dirs)===null||i===void 0?void 0:i.length)===0&&(p.dirs=null);const F=Oe(p),B=Number((C=ee((N=F.props)===null||N===void 0?void 0:N.span,U))!==null&&C!==void 0?C:Fe);B!==0&&b.push({child:F,rawChildSpan:B})});let M=0;const P=(r=b[b.length-1])===null||r===void 0?void 0:r.child;if(P!=null&&P.props){const p=(l=P.props)===null||l===void 0?void 0:l.suffix;p!==void 0&&p!==!1&&(M=Number((a=ee((o=P.props)===null||o===void 0?void 0:o.span,U))!==null&&a!==void 0?a:Fe),P.props.privateSpan=M,P.props.privateColStart=s+1-M,P.props.privateShow=(u=P.props.privateShow)!==null&&u!==void 0?u:!0)}let I=0,S=!1;for(const{child:p,rawChildSpan:j}of b){if(S&&(this.overflow=!0),!S){const _=Number((f=ee((h=p.props)===null||h===void 0?void 0:h.offset,U))!==null&&f!==void 0?f:0),i=Math.min(j+_,s);if(p.props?(p.props.privateSpan=i,p.props.privateOffset=_):p.props={privateSpan:i,privateOffset:_},K){const N=I%s;i+N>s&&(I+=s-N),i+I+M>$*s?S=!0:I+=i}}S&&(p.props?p.props.privateShow!==!0&&(p.props.privateShow=!1):p.props={privateShow:!1})}return R("div",Ne({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[he]:this.isSsr||void 0},this.$attrs),b.map(({child:p})=>p))};return this.isResponsive&&this.responsive==="self"?R(Pt,{onResize:this.handleResize},{default:e}):e()}});function Ee(e,r){const{rawNode:l}=e;return Object.assign(Object.assign({},l),{label:l[r],value:e.key})}function Ke(e,r,l,o){const{rawNode:a}=e;return Object.assign(Object.assign({},a),{value:e.key,label:r.map(u=>u.rawNode[o]).join(l)})}const Fn=Ft([pe("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),pe("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 transition: box-shadow .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-menu-border-radius);
 box-shadow: var(--n-menu-box-shadow);
 background-color: var(--n-menu-color);
 outline: none;
 `,[pe("tree","max-height: var(--n-menu-height);"),Ie("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),Ie("action",`
 padding: var(--n-action-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),Et()])]),En=Object.assign(Object.assign(Object.assign(Object.assign({},Ue.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},loading:Boolean,maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:me.propTo,menuProps:Object,virtualScroll:{type:Boolean,default:!0},status:String,renderTag:Function,ellipsisTagPopoverProps:Object}),on),{renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,watchProps:Array,getChildren:Function,onBlur:Function,onFocus:Function,onLoad:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:Boolean}),Kn=ie({name:"TreeSelect",props:En,setup(e){const r=O(null),l=O(null),o=O(null),a=O(null),{mergedClsPrefixRef:u,namespaceRef:h,inlineThemeDisabled:f}=Ae(e),{localeRef:x}=rn("Select"),{mergedSizeRef:b,mergedDisabledRef:K,mergedStatusRef:$,nTriggerFormBlur:s,nTriggerFormChange:U,nTriggerFormFocus:M,nTriggerFormInput:P}=Kt(e),I=O(e.defaultValue),S=le(e,"value"),p=ve(S,I),j=O(e.defaultShow),_=le(e,"show"),i=ve(_,j),N=O(""),C=k(()=>{const{filter:t}=e;if(t)return t;const{labelField:n}=e;return(c,d)=>c.length?d[n].toLowerCase().includes(c.toLowerCase()):!0}),F=k(()=>sn(e.options,tn(e.keyField,e.childrenField,e.disabledField,void 0))),{value:B}=p,E=O(e.checkable?null:Array.isArray(B)&&B.length?B[B.length-1]:null),Y=k(()=>e.multiple&&e.cascade&&e.checkable),oe=O(e.defaultExpandAll?void 0:e.defaultExpandedKeys||e.expandedKeys),de=le(e,"expandedKeys"),w=ve(de,oe),L=O(!1),Le=k(()=>{const{placeholder:t}=e;return t!==void 0?t:x.value.placeholder}),Ge=k(()=>e.checkable?[]:ye.value),ye=k(()=>{const{value:t}=p;return e.multiple?Array.isArray(t)?t:[]:t===null||Array.isArray(t)?[]:[t]}),ze=k(()=>{const{multiple:t,showPath:n,separator:c,labelField:d}=e;if(t)return null;const{value:g}=p;if(!Array.isArray(g)&&g!==null){const{value:T}=F,V=T.getNode(g);if(V!==null)return n?Ke(V,T.getPath(g).treeNodePath,c,d):Ee(V,d)}return null}),qe=k(()=>{const{multiple:t,showPath:n,separator:c}=e;if(!t)return null;const{value:d}=p;if(Array.isArray(d)){const g=[],{value:T}=F,{checkedKeys:V}=T.getCheckedKeys(d,{checkStrategy:e.checkStrategy,cascade:Y.value,allowNotLoaded:e.allowCheckingNotLoaded}),{labelField:A}=e;return V.forEach(Te=>{const fe=T.getNode(Te);fe!==null&&g.push(n?Ke(fe,T.getPath(Te).treeNodePath,c,A):Ee(fe,A))}),g}return[]}),We=k(()=>{const{self:{menuPadding:t}}=ce.value;return t});function re(){var t;(t=l.value)===null||t===void 0||t.focus()}function be(){var t;(t=l.value)===null||t===void 0||t.focusInput()}function _e(t){const{onUpdateShow:n,"onUpdate:show":c}=e;n&&z(n,t),c&&z(c,t),j.value=t}function Q(t,n,c){const{onUpdateValue:d,"onUpdate:value":g}=e;d&&z(d,t,n,c),g&&z(g,t,n,c),I.value=t,P(),U()}function Qe(t,n){const{onUpdateIndeterminateKeys:c,"onUpdate:indeterminateKeys":d}=e;c&&z(c,t,n),d&&z(d,t,n)}function He(t,n,c){const{onUpdateExpandedKeys:d,"onUpdate:expandedKeys":g}=e;d&&z(d,t,n,c),g&&z(g,t,n,c),oe.value=t}function we(t){const{onFocus:n}=e;n&&n(t),M()}function Se(t){G();const{onBlur:n}=e;n&&n(t),s()}function G(){_e(!1)}function ue(){K.value||(N.value="",_e(!0),e.filterable&&be())}function Xe(){N.value=""}function Ye(t){var n;i.value&&(!((n=l.value)===null||n===void 0)&&n.$el.contains(zt(t))||G())}function Je(){K.value||(i.value?e.filterable||G():ue())}function H(t){const{value:{getNode:n}}=F;return t.map(c=>{var d;return((d=n(c))===null||d===void 0?void 0:d.rawNode)||null})}function Ze(t,n,c){const d=H(t),g=c.action==="check"?"select":"unselect",T=c.node;e.multiple?(Q(t,d,{node:T,action:g}),e.filterable&&(be(),e.clearFilterAfterSelect&&(N.value=""))):(t.length?Q(t[0],d[0]||null,{node:T,action:g}):Q(null,null,{node:T,action:g}),G(),re())}function et(t){e.checkable&&Qe(t,H(t))}function tt(t){var n;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||(L.value=!0,we(t))}function nt(t){var n;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||(L.value=!1,Se(t))}function at(t){var n,c,d;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||!((d=(c=l.value)===null||c===void 0?void 0:c.$el)===null||d===void 0)&&d.contains(t.relatedTarget)||(L.value=!0,we(t))}function lt(t){var n,c,d;!((n=a.value)===null||n===void 0)&&n.contains(t.relatedTarget)||!((d=(c=l.value)===null||c===void 0?void 0:c.$el)===null||d===void 0)&&d.contains(t.relatedTarget)||(L.value=!1,Se(t))}function ot(t){t.stopPropagation();const{multiple:n}=e;!n&&e.filterable&&G(),n?Q([],[],{node:null,action:"clear"}):Q(null,null,{node:null,action:"clear"})}function rt(t){const{value:n}=p;if(Array.isArray(n)){const{value:c}=F,{checkedKeys:d}=c.getCheckedKeys(n,{cascade:Y.value,allowNotLoaded:e.allowCheckingNotLoaded}),g=d.findIndex(T=>T===t.value);if(~g){const T=d[g],V=H([T])[0];if(e.checkable){const{checkedKeys:A}=c.uncheck(t.value,d,{checkStrategy:e.checkStrategy,cascade:Y.value,allowNotLoaded:e.allowCheckingNotLoaded});Q(A,H(A),{node:V,action:"delete"})}else{const A=Array.from(d);A.splice(g,1),Q(A,H(A),{node:V,action:"delete"})}}}}function st(t){const{value:n}=t.target;N.value=n}function Re(t){const{value:n}=o;return n?n.handleKeydown(t):{enterBehavior:null}}function it(t){if(t.key==="Enter"){if(i.value){const{enterBehavior:n}=Re(t);if(!e.multiple)switch(n){case"default":case"toggleSelect":G(),re();break}}else ue();t.preventDefault()}else t.key==="Escape"?i.value&&(qt(t),G(),re()):i.value?Re(t):t.key==="ArrowDown"&&ue()}function dt(){G(),re()}function ut(t){dn(t,"action")||t.preventDefault()}const ct=k(()=>{const{renderTag:t}=e;if(t)return function({option:c,handleClose:d}){const{value:g}=c;if(g!==void 0){const T=F.value.getNode(g);if(T)return t({option:T.rawNode,handleClose:d})}return g}});$e(nn,{pendingNodeKeyRef:E,dataTreeMate:F});function xe(){var t;i.value&&((t=r.value)===null||t===void 0||t.syncPosition())}un(a,xe);const ft=an(e),ke=k(()=>{if(e.checkable){const t=p.value;return e.multiple&&Array.isArray(t)?F.value.getCheckedKeys(t,{cascade:e.cascade,checkStrategy:ft.value,allowNotLoaded:e.allowCheckingNotLoaded}):{checkedKeys:Array.isArray(t)||t===null?[]:[t],indeterminateKeys:[]}}return{checkedKeys:[],indeterminateKeys:[]}}),pt={getCheckedData:()=>{const{checkedKeys:t}=ke.value;return{keys:t,options:H(t)}},getIndeterminateData:()=>{const{indeterminateKeys:t}=ke.value;return{keys:t,options:H(t)}},focus:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.focus()},focusInput:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.focusInput()},blur:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.blur()},blurInput:()=>{var t;return(t=l.value)===null||t===void 0?void 0:t.blurInput()}},ce=Ue("TreeSelect","-tree-select",Fn,Pn,e,u),Ce=k(()=>{const{common:{cubicBezierEaseInOut:t},self:{menuBoxShadow:n,menuBorderRadius:c,menuColor:d,menuHeight:g,actionPadding:T,actionDividerColor:V,actionTextColor:A}}=ce.value;return{"--n-menu-box-shadow":n,"--n-menu-border-radius":c,"--n-menu-color":d,"--n-menu-height":g,"--n-bezier":t,"--n-action-padding":T,"--n-action-text-color":A,"--n-action-divider-color":V}}),J=f?Mt("tree-select",void 0,Ce,e):void 0;return Object.assign(Object.assign({},pt),{menuElRef:a,mergedStatus:$,triggerInstRef:l,followerInstRef:r,treeInstRef:o,mergedClsPrefix:u,mergedValue:p,mergedShow:i,namespace:h,adjustedTo:me(e),isMounted:Bt(),focused:L,menuPadding:We,mergedPlaceholder:Le,mergedExpandedKeys:w,treeSelectedKeys:Ge,treeCheckedKeys:ye,mergedSize:b,mergedDisabled:K,selectedOption:ze,selectedOptions:qe,pattern:N,pendingNodeKey:E,mergedCascade:Y,mergedFilter:C,selectionRenderTag:ct,handleTriggerOrMenuResize:xe,doUpdateExpandedKeys:He,handleMenuLeave:Xe,handleTriggerClick:Je,handleMenuClickoutside:Ye,handleUpdateCheckedKeys:Ze,handleUpdateIndeterminateKeys:et,handleTriggerFocus:tt,handleTriggerBlur:nt,handleMenuFocusin:at,handleMenuFocusout:lt,handleClear:ot,handleDeleteOption:rt,handlePatternInput:st,handleKeydown:it,handleTabOut:dt,handleMenuMousedown:ut,mergedTheme:ce,cssVars:f?void 0:Ce,themeClass:J==null?void 0:J.themeClass,onRender:J==null?void 0:J.onRender})},render(){const{mergedTheme:e,mergedClsPrefix:r,$slots:l}=this;return R("div",{class:`${r}-tree-select`},R(At,null,{default:()=>[R($t,null,{default:()=>R(cn,{ref:"triggerInstRef",onResize:this.handleTriggerOrMenuResize,status:this.mergedStatus,focused:this.focused,clsPrefix:r,theme:e.peers.InternalSelection,themeOverrides:e.peerOverrides.InternalSelection,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,renderTag:this.selectionRenderTag,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,loading:this.loading,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown},{arrow:()=>{var o,a;return[(a=(o=this.$slots).arrow)===null||a===void 0?void 0:a.call(o)]}})}),R(Ut,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===me.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>R(jt,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{var o;if(!this.mergedShow)return null;const{mergedClsPrefix:a,checkable:u,multiple:h,menuProps:f,options:x}=this;return(o=this.onRender)===null||o===void 0||o.call(this),Vt(R("div",Object.assign({},f,{class:[`${a}-tree-select-menu`,f==null?void 0:f.class,this.themeClass],ref:"menuElRef",style:[(f==null?void 0:f.style)||"",this.cssVars],tabindex:0,onMousedown:this.handleMenuMousedown,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout}),R(ln,{ref:"treeInstRef",blockLine:!0,allowCheckingNotLoaded:this.allowCheckingNotLoaded,showIrrelevantNodes:!1,animated:!1,pattern:this.pattern,getChildren:this.getChildren,filter:this.mergedFilter,data:x,cancelable:h,labelField:this.labelField,keyField:this.keyField,disabledField:this.disabledField,childrenField:this.childrenField,theme:e.peers.Tree,themeOverrides:e.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:u,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,renderLabel:this.renderLabel,renderPrefix:this.renderPrefix,renderSuffix:this.renderSuffix,renderSwitcherIcon:this.renderSwitcherIcon,nodeProps:this.nodeProps,watchProps:this.watchProps,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,overrideDefaultNodeClickBehavior:this.overrideDefaultNodeClickBehavior,internalTreeSelect:!0,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,internalRenderEmpty:()=>R("div",{class:`${a}-tree-select-menu__empty`},Lt(l.empty,()=>[R(fn,{theme:e.peers.Empty,themeOverrides:e.peerOverrides.Empty})])),onLoad:this.onLoad,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}),Gt(l.action,b=>b?R("div",{class:`${a}-tree-select-menu__action`,"data-action":!0},b):null),R(pn,{onFocus:this.handleTabOut})),[[Dt,this.handleMenuClickoutside,void 0,{capture:!0}]])}})})]}))}}),Me={getMenuTree:()=>ne.get("/permission/menu/tree"),getButtons:({parentId:e})=>ne.get(`/permission/button/${e}`),getComponents:()=>Wt.get("/components.json"),addPermission:e=>ne.post("/permission",e),savePermission:(e,r)=>ne.patch(`/permission/${e}`,r),deletePermission:e=>ne.delete(`permission/${e}`)},Mn=["/src/views/profile/index.vue","/src/views/pms/user/index.vue","/src/views/pms/role/role-user.vue","/src/views/pms/role/index.vue","/src/views/pms/resource/index.vue","/src/views/pms/resource/components/ResAddOrEdit.vue","/src/views/pms/resource/components/QuestionLabel.vue","/src/views/pms/resource/components/MenuTree.vue","/src/views/login/index.vue","/src/views/iframe/index.vue","/src/views/home/index.vue","/src/views/error-page/404.vue","/src/views/error-page/403.vue","/src/views/demo/upload/index.vue","/src/views/base/unocss.vue","/src/views/base/unocss-icon.vue","/src/views/base/test-modal.vue","/src/views/base/keep-alive.vue","/src/views/base/index.vue"],Bn={__name:"ResAddOrEdit",props:{menus:{type:Array,required:!0}},emits:["refresh"],setup(e,{expose:r,emit:l}){const o=e,a=l,u=k(()=>[{name:"根菜单",id:"",children:o.menus||[]}]),h=Mn.map(_=>({label:_,value:_})),f=vt.map(_=>({label:()=>R("span",{class:"flex items-center"},[R("i",{class:`${_} text-18 mr-8`}),_]),value:_})),x=[{label:"跟随系统",value:""},{label:"简约-simple",value:"simple"},{label:"通用-normal",value:"normal"},{label:"全面-full",value:"full"},{label:"空白-empty",value:"empty"}],b={required:!0,message:"此为必填项",trigger:["blur","change"]},K={enable:!0,show:!0,layout:""},[$,s,U]=Zt(),[M,P]=Qt(),I=O(""),S=O(!1);function p(_={}){const{action:i,row:N={},...C}=_;I.value=i,s.value={...K,...N},S.value=!!N.parentId&&N.type==="BUTTON",M.value.open({...C,onOk:j})}async function j(){await U(),P.value=!0;try{let _;s.value.parentId||(s.value.parentId=null),I.value==="add"?_=(await Me.addPermission(s.value)).data:I.value==="edit"&&await Me.savePermission(s.value.id,s.value),P.value=!1,$message.success("保存成功"),a("refresh",I.value==="add"?_:s.value)}catch(_){return console.error(_),P.value=!1,!1}}return r({handleOpen:p}),(_,i)=>{const N=Kn,C=Cn,F=mn,B=vn,E=hn,Y=gn,oe=In,de=en;return q(),W(v(Ht),{ref_key:"modalRef",ref:M},{default:m(()=>[y(de,{ref_key:"modalFormRef",ref:$,"label-placement":"left","require-mark-placement":"left","label-width":100,model:v(s)},{default:m(()=>[y(oe,{cols:24,"x-gap":24},{default:m(()=>[y(C,{span:12,label:"所属菜单",path:"parentId"},{default:m(()=>[y(N,{value:v(s).parentId,"onUpdate:value":i[0]||(i[0]=w=>v(s).parentId=w),options:v(u),disabled:v(S),"label-field":"name","key-field":"id",placeholder:"根菜单",clearable:""},null,8,["value","options","disabled"])]),_:1}),y(C,{span:12,path:"name",rule:b},{label:m(()=>[y(D,{label:"名称",content:"标题"})]),default:m(()=>[y(F,{value:v(s).name,"onUpdate:value":i[1]||(i[1]=w=>v(s).name=w)},null,8,["value"])]),_:1}),y(C,{span:12,path:"code",rule:b},{label:m(()=>[y(D,{label:"编码",content:"如果是菜单则对应前端路由的name，使用大驼峰"})]),default:m(()=>[y(F,{value:v(s).code,"onUpdate:value":i[2]||(i[2]=w=>v(s).code=w)},null,8,["value"])]),_:1}),v(s).type==="MENU"?(q(),W(C,{key:0,span:12,path:"path",rule:{trigger:["blur","change"],type:"string",message:"必须是/、http、https开头",validator(w,L){return L?/\/|http|https/.test(L):!0}}},{label:m(()=>[y(D,{label:"路由地址",content:"父级菜单可不填"})]),default:m(()=>[y(F,{value:v(s).path,"onUpdate:value":i[3]||(i[3]=w=>v(s).path=w)},null,8,["value"])]),_:1},8,["rule"])):X("",!0),v(s).type==="MENU"?(q(),W(C,{key:1,span:12,path:"icon"},{label:m(()=>[y(D,{label:"菜单图标",content:"如material-symbols:help，图标库地址: https://icones.js.org/collection/all"})]),default:m(()=>[y(B,{value:v(s).icon,"onUpdate:value":i[4]||(i[4]=w=>v(s).icon=w),options:v(f),clearable:"",filterable:""},null,8,["value","options"])]),_:1})):X("",!0),v(s).type==="MENU"?(q(),W(C,{key:2,span:12,path:"layout"},{label:m(()=>[y(D,{label:"layout",content:"对应layouts文件夹下的目录名, 为空则默认为 default"})]),default:m(()=>[y(B,{value:v(s).layout,"onUpdate:value":i[5]||(i[5]=w=>v(s).layout=w),options:x,clearable:""},null,8,["value"])]),_:1})):X("",!0),v(s).type==="MENU"?(q(),W(C,{key:3,span:24,path:"component"},{label:m(()=>[y(D,{label:"组件路径",content:"前端组件的路径，以 /src 开头，父级菜单可不填"})]),default:m(()=>[y(B,{value:v(s).component,"onUpdate:value":i[6]||(i[6]=w=>v(s).component=w),options:v(h),clearable:"",filterable:"",tag:""},null,8,["value","options"])]),_:1})):X("",!0),v(s).type==="MENU"?(q(),W(C,{key:4,span:12,path:"show"},{label:m(()=>[y(D,{label:"显示状态",content:"控制是否在菜单栏显示，不影响路由注册"})]),default:m(()=>[y(E,{value:v(s).show,"onUpdate:value":i[7]||(i[7]=w=>v(s).show=w)},{checked:m(()=>[Z(" 显示 ")]),unchecked:m(()=>[Z(" 隐藏 ")]),_:1},8,["value"])]),_:1})):X("",!0),y(C,{span:12,path:"enable"},{label:m(()=>[y(D,{label:"状态",content:"如果是菜单，禁用后将不添加到路由表，无法进入此页面"})]),default:m(()=>[y(E,{value:v(s).enable,"onUpdate:value":i[8]||(i[8]=w=>v(s).enable=w)},{checked:m(()=>[Z(" 启用 ")]),unchecked:m(()=>[Z(" 禁用 ")]),_:1},8,["value"])]),_:1}),v(s).type==="MENU"?(q(),W(C,{key:5,span:12,path:"keepAlive"},{label:m(()=>[y(D,{label:"KeepAlive",content:"设置keepAlive需将组件的name设置成当前菜单的code"})]),default:m(()=>[y(E,{value:v(s).keepAlive,"onUpdate:value":i[9]||(i[9]=w=>v(s).keepAlive=w)},{checked:m(()=>[Z(" 是 ")]),unchecked:m(()=>[Z(" 否 ")]),_:1},8,["value"])]),_:1})):X("",!0),v(s).type==="MENU"?(q(),W(C,{key:6,span:12,label:"排序",path:"order",rule:{type:"number",required:!0,message:"此为必填项",trigger:["blur","change"]}},{default:m(()=>[y(Y,{value:v(s).order,"onUpdate:value":i[10]||(i[10]=w=>v(s).order=w)},null,8,["value"])]),_:1})):X("",!0)]),_:1})]),_:1},8,["model"])]),_:1},512)}}},Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Bn},Symbol.toStringTag,{value:"Module"}));export{Qn as R,Bn as _,Me as a};
